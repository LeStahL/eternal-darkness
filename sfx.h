/* File generated with Shader Minifier 1.1.5
 * http://www.ctrl-alt-test.fr
 */
#ifndef SFX_H_
# define SFX_H_
# define VAR_IBLOCKOFFSET "f"
# define VAR_ISAMPLERATE "k"
# define VAR_IVOLUME "i"

const char *sfx_frag =
 "#version 130\n"
 "uniform float f,k,i;\n"
 "#define DEBUG_ONLY_DRUMS false\n"
 "#define DEBUG_ONLY_MELO false\n"
 "#define DEBUG_ONLY_TRACK-1\n"
 "#define PI radians(180.)\n"
 "float p(float f)"
 "{"
   "return sin(2.*PI*mod(f,1.));"
 "}"
 "float p(float f,float i)"
 "{"
   "return.5*p(f)+.5*p((1.+i)*f);"
 "}"
 "float t(float f)"
 "{"
   "return sign(2.*fract(f)-1.);"
 "}"
 "float t(float f,float i)"
 "{"
   "return sign(2.*fract(f)-1.+i);"
 "}"
 "float s(float f)"
 "{"
   "return 4.*abs(fract(f)-.5)-1.;"
 "}"
 "float e(float f)"
 "{"
   "return 2.*fract(f)-1.;"
 "}"
 "float e(float p,float f,float s)"
 "{"
   "return floor(f*p+.5)*s;"
 "}"
 "float e(float p,float f)"
 "{"
   "return floor(f*p+.5)/f;"
 "}"
 "float r(float f)"
 "{"
   "return clamp(f,-1.,1.);"
 "}"
 "float n(float f)"
 "{"
   "return smoothstep(0.,.01,f);"
 "}"
 "float w(float f)"
 "{"
   "return 32.7*pow(2.,f/12.);"
 "}"
 "float D(int f)"
 "{"
   "return 1.-2.*float(f%2);"
 "}"
 "const float m=32.,I=m/60.,c=60./m;"
 "float D(float f,float i,float c,float s)"
 "{"
   "return smoothstep(-1e-05,i,f)-(1.-s)*smoothstep(0.,c,f-i);"
 "}"
 "float d(float f)"
 "{"
   "return 2./PI*atan(f);"
 "}"
 "float P(float f)"
 "{"
   "return clamp(d(f)-.1*cos(.9*f*exp(f)),-1.,1.);"
 "}"
 "float D(float f,float i)"
 "{"
   "return abs(f)<i?f:floor(4.*f+.5)*.25;"
 "}"
 "float D(float f,float s,int i,float c,float e,float w,float I,float P)"
 "{"
   "float r=0.;"
   "int m=4;"
   "for(int D=0;D<=i;D+=m)"
     "{"
       "float a=2.*float(D)+1.,n=1./a,k=(D%2==1?-1.:1.)*n*n,o=n,x=pow(1.+pow(float(D)*e,2.*w),-.5)+I*exp(-pow(float(D)*e*P,2.));"
       "r+=(c*k+(1.-c)*o)*x*p(a*s*f);"
     "}"
   "return r;"
 "}"
 "float D(float f,float i,float c,int s,float w,float p,float r,float n,float m)"
 "{"
   "return D(e(f,c,1./c),i,s,w,p,r,n,m);"
 "}"
 "float D(float f,float i,float c,float s,float p,float m)"
 "{"
   "float r=pow(f/c,8.),w=p+(1.-p)*exp(-(f-c)/s),e=f<i-m?1.:pow((i-f)/m,4.);"
   "return(f<c?r:w)*e;"
 "}"
 "float P(float f,float s,float i,float c,float w,float m,float I,float r)"
 "{"
   "float k=0.,e=1./i,n=1./r,P=s*f;"
   "for(int D=1;D<=200;D++)"
     "{"
       "float a=2./PI*(1.-2.*float(D%2))/float(D),x=pow(1.+pow(float(D)*s*e,c),-.5)+I*exp(-pow((float(D)*s-i)*n,2.));"
       "if(abs(x*a)<1e-06)"
         "break;"
       "if(w>0.||m>0.)"
         "k+=.33*(p(float(D)*P)+p(float(D)*P*(1.+w))+p(float(D)*P*(1.+m)));"
       "else"
         " k+=x*a*p(float(D)*P);"
     "}"
   "return k;"
 "}"
 "float P(float f,float s,float i,float c,float D,float m,float I,float r,float w)"
 "{"
   "float e=0.,n=1./i,P=1./r,a=s*f;"
   "for(int k=1;k<=200;k++)"
     "{"
       "float x=1./float(k)*(1.+(2.*float(k%2)-1.)*p(w)),d=pow(1.+pow(float(k)*s*n,c),-.5)+I*exp(-pow((float(k)*s-i)*P,2.));"
       "if(abs(d*x)<1e-06)"
         "break;"
       "if(D>0.||m>0.)"
         "e+=.33*(p(float(k)*a)+p(float(k)*a*(1.+D))+p(float(k)*a*(1.+m)));"
       "else"
         " e+=d*x*p(float(k)*a);"
     "}"
   "return 2.*e-1.;"
 "}"
 "float d(float f,float s,float i,float c,float w,float m,float I,float r,float k)"
 "{"
   "float e=0.,n=1./i,P=1./r,a=s*f;"
   "for(int v=1;v<=200;v++)"
     "{"
       "float x=1./(2.*PI*float(v))*(D(v)*p(k*float(v)+.25)-1.),d=pow(1.+pow(float(v)*s*n,c),-.5)+I*exp(-pow((float(v)*s-i)*P,2.));"
       "if(abs(d*x)<1e-06)"
         "break;"
       "if(w>0.||m>0.)"
         "e+=.33*(p(float(v)*a)+p(float(v)*a*(1.+w))+p(float(v)*a*(1.+m)));"
       "else"
         " e+=d*x*p(float(v)*a);"
     "}"
   "return 2.*e-1.;"
 "}"
 "float P(float f,float i,int c,int s)"
 "{"
   "f=f-min(f,i);"
   "float e=80.,w=100.,I=.01*D(f,.8,.4,.5),a=0.,t=D(f,.2,1.,0.),n=p(f*e*(1.+I*p(f*w*(1.+a*p(f*w)))));"
   "return t*n;"
 "}"
 "float D(float f,float i,float t)"
 "{"
   "f=f-min(f,i);"
   "float e=6000.,w=800.,k=350.,c=.01,n=.01,m=.1,p=s(f*(k+(e-w)*smoothstep(-c,0.,-f)+(w-k)*smoothstep(-c-n,-c,-f)))*smoothstep(-m,-c-n,-f),a=2.*fract(sin(f*90.)*45000.)*D(f,.05,.3,.3);"
   "return t*clamp(1.7*(2.*p+a),-1.5,1.5)*D(f,0.,.25,.3);"
 "}"
 "float P(float f,float i,float s)"
 "{"
   "f=f-min(f,i);"
   "float p=fract(sin(f*90.)*45000.);"
   "p=1./(1.+p);"
   "return s*2.*p*D(f,0.,.12,0.);"
 "}"
 "float d(float f,float i,float s)"
 "{"
   "return f=f-min(f,i),s*.5*fract(sin(f*90.)*45000.)*D(f,.03,.15,.15);"
 "}"
 "float a(float f)"
 "{"
   "float i=floor(f*(1500.*exp(-f*.1)));"
   "vec2 p=fract(vec2(i*5.3983,i*5.4427));"
   "p+=dot(p.yx,p.xy+vec2(21.5351,14.3137));"
   "return fract(p.x*p.y*3.4337)*.5*smoothstep(-.3,0.,-f);"
 "}"
 "float a(float f,float i,float s)"
 "{"
   "f=f-min(f,i);"
   "float c=50.+150.*smoothstep(-.12,0.,-f),a=smoothstep(0.,.015,f)*smoothstep(-.08,0.,.16-f),k=a*D(f,c,3,1.,.8,8.,4.,1.),w=.4*step(f,.03)*p(f*1100.*e(f*800.)),n=(1.-exp(-1000.*f))*exp(-40.*f)*p((400.-200.*f)*f*p(c*f));"
   "return s*(k+n+.1*w);"
 "}"
 "float n(float f,float i,float s)"
 "{"
   "f=f-min(f,i);"
   "float c=50.+150.*smoothstep(-.12,0.,-f),a=smoothstep(0.,.015,f)*smoothstep(-.08,0.,.16-f),k=a*D(f,c,3,1.,.8,8.,4.,1.),w=.4*step(f,.03)*p(f*1100.*e(f*800.)),n=(1.-exp(-1000.*f))*exp(-40.*f)*p((400.-200.*f)*f*p(c*f));"
   "return s*(k+n+.1*w);"
 "}"
 "float a(float f,float i,float c,float D)"
 "{"
   "float a=.9999,n=6.,I=.5,x=.6,k=.1,m=.2,P=e(f*a*(w(D)+k*e(f*a*w(D)))),r=x*s(f*n*w(D)+I*P+m*p(f*n*w(D)));"
   "return r;"
 "}"
 "float P(float f,float i,float m,float k,float v,int x)"
 "{"
   "float I=i-m,o=I/(k-m),y=c*(i-m),g=w(v),b=n(i-m)*n(k-i),O=clamp(1.1*p(w(v)*f),-.999,.999);"
   "if(x==-1)"
     "return 0.;"
   "if(x==0)"
     "return b*O;"
   "if(x==23)"
     "{"
       "float l=1.4,u=.3;"
       "b=smoothstep(0.,.001,i-m)*pow(smoothstep(u,0.,i-k),2.5);"
       "b*=exp(-l*(i-m));"
       "v+=0.;"
       "float h=2e-05*(1.+.5*sin(2.*i));"
       "int U=40;"
       "O=0.;"
       "for(int S=0;S<U;S++)"
         "O+=.08*a(y+float(S)*h,i,k,v);"
       "O=.7*clamp(4.*O,-1.,1.);"
     "}"
   "if(x==14)"
     "{"
       "b*=D(I,k-m,2.,0.,.2,2.);"
       "b*=.5;"
       "float u=600.*D(I,k-m,2.,0.,1.,2.)+40.*sqrt(g);"
       "O+=.3*d(f,g,u,30.,.002,-.01,0.,0.,.1);"
       "O=r(.8*O);"
     "}"
   "if(x==15)"
     "{"
       "b*=D(I,k-m,3.,0.,.2,2.);"
       "b*=.5;"
       "float u=100.*D(I,k-m,2.,0.,1.,2.)+20.*sqrt(g);"
       "O=.2*P(f,g,u,50.,-.01-.005*p(.5*o),.01-.008*p(.25*o+.25),0.,0.);"
       "O+=.3*P(f,g,u,30.,.002,-.01,0.,0.,.1+.06*p(.25*y));"
       "O=r(.8*O);"
     "}"
   "if(x==16)"
     "{"
       "b*=D(I,k-m,1.5,2.,.2,.8);"
       "b*=.5;"
       "float u=100.,h=200.+100.*D(I,k-m,1.5,2.5,.2,10.);"
       "O=.9*P(f,g,h,u,.01,.016,0.,0.);"
       "O=.4*(.5*e(f*g+.1+.1*p(2.*f))+e(f*g+.25)+e(f*g+.2*p(.5*f)));"
     "}"
   "if(x==17)"
     "{"
       "b*=D(I,k-m,1.5,2.,.2,.8);"
       "b*=.5;"
       "float u=20.,h=200.+100.*D(I,k-m,1.5,2.5,.2,10.);"
       "O=.9*P(f,g,h,u,.01,.02,.3,3.);"
     "}"
   "if(x==10)"
     "O=s(2.*g*f)+s(1.998*g*y*(1.+.0001*p(4.*y))),O+=.2*e(5.01*g*f)+.2*e(14.01*g*f),O+=e(f*(g+1000.*smoothstep(-.1,0.,-I)))*smoothstep(-.1,0.,-I),O*=.2;"
   "if(x==20)"
     "O=D(f,w(v),1024.,16,.2,8.+20.*smoothstep(0.,.3,o),1.2,.2,.1)+D(f,2.*w(v),1024.,16,.4,8.+20.*smoothstep(0.,.1,o),1.2,.2,.1),O=.8*O*exp(-4.*I),O+=.4*p(y*g)*exp(-2.*I),O+=.4*s(y*4.*g)*exp(-8.*I),O+=.6*smoothstep(0.,1.2,o)*(.5*t(y*g,0.)+.5*t(y*g*.99,.01)),O=r(1.3*O);"
   "else"
     " if(x==12)"
       "{"
         "float u=1.4,h=1.3;"
         "b*=exp(-u*(i-m));"
         "float S=1.+.02*exp(-10.*(i-m));"
         "S=1.;"
         "O=.7*t(S*w(v)*f,-.4-.15*p(.3*(i-m)));"
         "O+=.5*p(w(v)*f,.05*p(.25*f));"
         "O=D(f,w(v),1024.,16,.2,8.+20.*smoothstep(0.,.3,o),1.2,.2,.1)+D(f,2.*w(v),1024.,16,.4,8.+20.*smoothstep(0.,.1,o),1.2,.2,.1);"
         "float l=2.+.5*p(.21*y),U=p(4.*g*y+l*p(.25*g*o));"
       "}"
     "else"
       " if(x==11)"
         "{"
           "float u=1.4,h=1.3;"
           "b*=exp(-u*(i-m));"
           "float S=1.+.02*exp(-10.*(i-m));"
           "S=1.;"
           "O=.7*t(S*w(v)*f,-.4-.15*p(.3*(i-m)));"
           "O+=.5*p(w(v)*f,.05*p(.25*f));"
         "}"
       "else"
         " if(x==13)"
           "{"
             "float u=2.+.5*p(.21*y),h=p(4.*g*y+u*p(.25*g*o));"
             "O=h;"
           "}"
         "else"
           " if(x==4)"
             "O=D(f,w(v),2048.,20,.2,3.+5.*smoothstep(0.,.3,o),1.2,.2,.1)+D(f,2.*w(v),1024.,10,.4,1.+3.*smoothstep(0.,.3,o),1.2,.2,.1),O*=.3;"
           "else"
             " if(x==30)"
               "{"
                 "float u=.001,h=.02;"
                 "O=0.;"
                 "for(float S=-h;S<h;S+=u)"
                   "O+=.8*p(.5*g*(y+S))+D(f+S,w(v),20,.2,.01*smoothstep(0.,.3,o),1.2,.2,.1)+.3*D(f+S,4.*w(v),10,.3,1.,.2,2.,.1);"
                 "O=.5*P(D(60.*O,5.));"
               "}"
             "else"
               " if(x==1)"
                 "{"
                   "float u=1.55;"
                   "b=smoothstep(0.,.25,i-m)*(1.+.01*sin(2.*PI*20.*f));"
                   "float S=.2;"
                   "b*=smoothstep(S,-S,i-k);"
                   "O=.3*(clamp(u*p(w(v)*f),-.999,.999)+clamp(u*p(.999*w(v)*f+.05),-.999,.999));"
                   "O+=.7*p(w(v)*f,.05);"
                 "}"
               "else"
                 " if(x==2)"
                   "{"
                     "float u=.33*g,h=.3*D(y,1.,5.,.01),S=.02*D(y,2.,8.,0.);"
                     "b=D(i-m,.002,2.,0.);"
                     "O=p(y*g*(1.+h*p(y*u*(1.+S*p(y*u)))));"
                     "O=e(O,16.,.0625);"
                     "b=D(i-m,.01,8.,0.);"
                     "O=.3*p(e(y,256.,.004)*g*.25,.05);"
                     "O+=p(y*g*.25);"
                   "}"
                 "else"
                   " if(x==3)"
                     "{"
                       "float u=1.4;"
                       "b*=exp(-u*(i-m));"
                       "O=p(f*w(v),.001)+s(f*2.*w(v)*(1.+.0001*p(.5*o)))*smoothstep(0.,.3,I);"
                       "float S=.005*smoothstep(0.,1.,y)*s(y);"
                       "O=e(y*w(v)*(1.+S)+.3*smoothstep(0.,.7,y)*e(y*3.01*w(v)));"
                       "float h=.998,l=.5,U=.5,L=1.,E=.1,Y=.6,N=e(y*h*(w(v)+E*e(y*h*w(v)))),G=L*e(y*l*w(v)+U*N+Y*p(y*l*w(v)));"
                       "O=.66*G;"
                     "}"
   "return clamp(b,0.,1.)*clamp(O,-1.,1.);"
 "}"
 "float v(float f)"
 "{"
   "int i=7,m[8]=int[8](0,3,9,12,14,16,18,20),v[7]=int[7](1,23,3,3,6,6,30);"
   "float s[20]=float[20](4.,6.,8.,4.25,5.25,6.25,7.25,8.25,8.75,8.,10.,11.,10.,11.,4.,6.,0.,2.,0.,2.),k[20]=float[20](6.,8.,10.,4.75,5.75,6.75,7.75,8.75,10.25,10.,11.,12.,11.,12.,6.,8.,2.,4.,2.,4.);"
   "int p[20]=int[20](1,1,1,3,3,3,3,3,4,1,6,6,5,5,0,0,7,7,8,8);"
   "float t[20]=float[20](0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.,0.),O=.142857,x=4.;"
   "int u=9,e[10]=int[10](0,6,11,11,15,24,30,48,69,89);"
   "float r[89]=float[89](0.,.125,.5,1.,1.25,1.5,0.,.5,1.,1.5,1.75,0.,.0625,.125,.1875,0.,.125,.1875,.25,.5625,.625,.6875,.75,1.,0.,.3125,.4375,.5,.8125,.9375,.03125,.0625,.125,.1875,.21875,.25,.3125,.375,.4375,.53125,.5625,.625,.6875,.71875,.75,.8125,.875,.9375,0.,0.,.125,.25,.25,.375,.5,.625,.75,.75,.875,1.,1.,1.125,1.25,1.25,1.375,1.5,1.625,1.75,1.875,0.,.125,.25,.375,.5,.625,.75,.875,1.,1.,1.125,1.125,1.25,1.375,1.375,1.5,1.625,1.625,1.75,1.875),w[89]=float[89](.125,.25,.625,1.125,1.375,1.625,.5,1.,1.5,1.75,2.,.03125,.125,.1875,.21875,.03125,.1875,.21875,.5625,.625,.6875,.71875,1.,1.25,.15625,.375,.5,.65625,.875,1.,.0625,.09375,.15625,.21875,.25,.3125,.375,.4375,.5,.5625,.59375,.65625,.71875,.75,.8125,.875,.9375,1.,.125,.125,.25,.375,.375,.5,.625,.75,.875,.875,1.,1.125,1.125,1.25,1.375,1.375,1.5,1.625,1.75,1.875,2.,.125,.25,.375,.5,.625,.75,.875,1.,1.125,1.125,1.25,1.25,1.375,1.5,1.5,1.625,1.75,1.75,1.875,2.),y[89]=float[89](24.,24.,25.,25.,27.,25.,24.,24.,23.,27.,26.,39.,39.,42.,38.,38.,42.,45.,47.,48.,44.,42.,42.,42.,44.,42.,41.,40.,39.,37.,20.,20.,20.,20.,20.,16.,26.,23.,25.,16.,16.,16.,16.,16.,20.,27.,13.,21.,34.,33.,36.,34.,33.,36.,37.,36.,34.,33.,37.,33.,23.,23.,33.,27.,25.,23.,25.,23.,25.,24.,24.,24.,25.,24.,24.,32.,24.,27.,34.,34.,27.,24.,20.,36.,24.,34.,22.,25.,24.),o[89]=float[89](1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.,1.);"
   "int S=6;"
   "float h=6.,g=.3,b=.6,U[7]=float[7](1.,1.,1.,1.,1.,.75,1.4),l=0.,N=0.,L=mod(I*f,x);"
   "if(L>x)"
     "return l;"
   "float E=.3,Y=1.,G=.99,B=.6,K=0.,M=0.;"
   "for(int C=0;C<i;C++)"
     "{"
       "int R=m[C+1]-m[C],F=R;"
       "for(int q=0;q<R;q++)"
         "if(L<k[m[C]+q])"
           "{"
             "F=q;"
             "break;"
           "}"
       "if(F==R)"
         "continue;"
       "float q=L-s[m[C]+F];"
       "int T=p[m[C]+F],A=e[T+1]-e[T],Z=A-1;"
       "for(int X=0;X<A-1;X++)"
         "if(q<r[e[T]+X+1])"
           "{"
             "Z=X;"
             "break;"
           "}"
       "int X=A-1;"
       "for(int W=0;W<A-1;W++)"
         "if(q<=w[e[T]+W]+g)"
           "{"
             "X=W;"
             "break;"
           "}"
       "for(int W=X;W<=Z;W++)"
         "{"
           "K=r[e[T]+W];"
           "M=w[e[T]+W];"
           "if(v[C]==S)"
             "{"
               "float V=mod(y[e[T]+W],h),Q=1.,J=1.-exp(-1000.*(q-K)),H=0.;"
               "if(V<.5)"
                 "Y=J-G*n(q-K)*smoothstep(-B,0.,K-q);"
               "else"
                 " if(V<1.5)"
                   "H=n(q*c,K*c,Q)*n(M-q);"
                 "else"
                   " if(V<2.5)"
                     "H=a(q*c,K*c,Q)*n(M-q);"
                   "else"
                     " if(V<3.5)"
                       "H=D(q*c,K*c,Q);"
                     "else"
                       " if(V<4.5)"
                         "H=P(q*c,K*c,Q);"
                       "else"
                         " if(V<5.5)"
                           "H=d(q*c,K*c,Q);"
                         "else"
                           " if(V<6.5)"
                             ";"
               "N+=U[C]*H;"
             "}"
           "else"
             " l+=U[C]*P(f,q,K,M,y[e[T]+W]+t[F],v[C]);"
         "}"
     "}"
   "N*=b;"
   "l*=b;"
   "if(DEBUG_ONLY_DRUMS)"
     "return.99*clamp(N,-1.,1.);"
   "if(DEBUG_ONLY_MELO)"
     "return.99*clamp(l,-1.,1.);"
   "Y=1.;"
   "E=.5;"
   "float X=d((1.-E)*Y*l+E*N);"
   "return X;"
 "}"
 "vec2 o(float f)"
 "{"
   "float i=.1,O=1e-05;"
   "return vec2(v(f));"
 "}"
 "void main()"
 "{"
   "float v=f+(gl_FragCoord.x-.5+(gl_FragCoord.y-.5)*512.)/k;"
   "vec2 s=i*o(v),x=floor((.5+.5*s)*65536.),O=mod(x,256.)/255.,n=floor(x/256.)/255.;"
   "gl_FragColor=vec4(O.x,n.x,O.y,n.y);"
 "}";

#endif // SFX_H_
